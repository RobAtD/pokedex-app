let pokemonRepository=function(){let e=[],t=document.querySelector("#loadingSpinner-container"),n=$("#previous-pokemon"),a=$("#next-pokemon");function o(){return e}function i(t){"object"!=typeof t?console.log("Pokemon is not an Object!"):e.push(t)}function r(e){return s(),fetch(e.detailsUrl).then(function(e){return c(),e.json()}).then(function(t){e.imageURLFront=t.sprites.front_default,e.imageURLBack=t.sprites.back_default,e.height=t.height,e.types=t.types}).catch(function(e){c(),console.error(e)})}function s(){t.classList.add("is-visible")}function c(){t.classList.remove("is-visible")}let l=document.querySelector(".music-button"),p=document.querySelector("audio");return l.addEventListener("click",function(){l.classList.contains("pause")?(p.load(),p.volume=.1,p.play(),l.classList.remove("pause")):(p.pause(),l.classList.add("pause"))}),{getAll:o,add:i,addListItem:function t(o){let i=document.querySelector("ul"),s=document.createElement("li"),c=document.createElement("button");c.setAttribute("data-toggle","modal"),c.setAttribute("data-target","#pokemonDetails-container"),c.innerText=o.name.charAt(0).toUpperCase()+o.name.slice(1),c.classList.add("btn","btn-primary","btn-lg","btn-block"),s.classList.add("list-group-item"),s.appendChild(c),i.appendChild(s),function t(o,i){o.addEventListener("click",function(){r(i).then(function(){let t=$(".modal-title"),o=$(".modal-body"),s=document.querySelector(".modal-body");t.empty(),o.empty();let c=$('<img class="modal-img" style="width:50%" />');c.attr("src",i.imageURLFront),c.attr("aria-label","Front image of "+i.name.charAt(0).toUpperCase()+i.name.slice(1));let l=$('<img class="modal-img" style="width:50%" />');l.attr("src",i.imageURLBack),l.attr("aria-label","Back image of "+i.name.charAt(0).toUpperCase()+i.name.slice(1));let p=$("<p>Name: "+i.name.charAt(0).toUpperCase()+i.name.slice(1)+"</p>"),m=$("<p>Height: "+i.height+"</p>"),u=$("<p>Types: "+i.types.map(e=>e.type.name).join(", ")+"</p>");t.append(p),o.append(c),o.append(l),o.append(m),o.append(u);let d,f,h=e.indexOf(i);function g(e){(f=e.changedTouches[0].screenX)<=d&&(h++,y()),f>=d&&(h--,y())}function y(){h<0?h++:e[h]?r(e[h]).then(function(){p.text("Name: "+e[h].name.charAt(0).toUpperCase()+e[h].name.slice(1)),m.text("Height: "+e[h].height),u.html("<p> Types: "+e[h].types.map(e=>e.type.name).join(", ")+"</p>"),c.attr("src",e[h].imageURLFront),c.attr("aria-label","Front image of "+e[h].name.charAt(0).toUpperCase()+e[h].name.slice(1)),l.attr("src",e[h].imageURLBack),l.attr("aria-label","Back image of "+e[h].name.charAt(0).toUpperCase()+e[h].name.slice(1))}):h--}s.addEventListener("touchstart",function e(t){d=t.changedTouches[0].screenX,s.addEventListener("touchend",g)}),n.on("click",function(){h--,y()}),a.on("click",function(){h++,y()})})})}(c,o)},loadList:function e(){return s(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=1302").then(function(e){return c(),e.json()}).then(function(e){e.results.forEach(function(e){i({name:e.name,detailsUrl:e.url})})}).catch(function(e){c(),console.error(e)})},loadDetails:r}}();function printPokemonList(e){pokemonRepository.addListItem(e)}function filterByName(e){return pokemonRepository.getAll().filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))}pokemonRepository.loadList().then(function(){let e=$("#search-field"),t=document.querySelector("ul");pokemonRepository.getAll().forEach(printPokemonList),e.on("input",function(){t.innerHTML="",filterByName(e.val()).forEach(printPokemonList)})});